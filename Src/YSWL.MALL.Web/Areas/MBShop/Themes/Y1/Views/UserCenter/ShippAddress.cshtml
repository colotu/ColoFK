@{
    Layout = "/Areas/MBShop/Themes/Y1/Views/Shared/_NoFootLayout.cshtml";
}
@section head{
    <script src="/Scripts/jquery/jquery.guid.js" type="text/javascript"></script>
}
@model YSWL.MALL.Model.Shop.Shipping.ShippingAddress
<!--START MAIN-WRAPPER-->
<div class="main-wrapper">
    <!--START HEADER-->
    <header class="m_header">
        <div class="">
            <div class="m_header_bar">
                <div class="m_icon_goback icon" onclick="javascript:history.go(-1);">
                    <span></span>
                </div>
                @if (String.IsNullOrWhiteSpace(Model.ShipName))
                {
                    <p class="m_header_title">新建收货地址</p>
                }
                else
                {
                    <p class="m_header_title">编辑收货地址</p>
                }

            </div>
        </div>
    </header>
    <!-- END HEADER -->
    @*<div class="menu_list">
        <input type="text" class="input-lg reg_input" placeholder="请输入收货人姓名">
        <input type="text" class="input-lg reg_input" placeholder="请输入手机号">
        <input type="text" class="input-lg reg_input" placeholder="请输入收货地址">
        <input type="text" class="input-lg reg_input" placeholder="确认密码">

    </div>*@
    <div class="menu_list">
        @using (Html.BeginForm("SubmitShippAddress", "UserCenter", FormMethod.Post, new { id = "FormSubmitAddress", area = "MBShop" }))
        {
            @Html.HiddenFor(m => m.ShippingId)
            @Html.HiddenFor(m => m.UserId)
            @Html.TextBoxFor(m => m.ShipName, new { maxlength = "20", placeholder = "收货人姓名", Class = "input-lg reg_input" })
            <span class="region_box">
                @Html.HiddenFor(m => m.RegionId, new { id = "hfSelectedNode" })
                <script src="/Scripts/jquery/maticsoft.selectregion.js" handle="/RegionHandle.aspx" isnull="true" type="text/javascript"></script>
            </span>
            @Html.TextBoxFor(m => m.Address, new { placeholder = "详细地址", Class = "input-lg reg_input" })

            @Html.TextBoxFor(m => m.CelPhone, new { maxlength = "11", placeholder = "手机号", Class = "input-lg reg_input" })

            @Html.TextBoxFor(m => m.EmailAddress, new { placeholder = "邮箱", Class = "input-lg reg_input" })
        }
    </div>
    <!--底部悬浮导航-->
    <a href="javascript:;" onclick=" Save_Consignee(this) ">
        <nav class="navbar-fixed-bottom nav_bottom_focus bg_blue">

            <span class="font_white">保存收货地址</span>

        </nav>
    </a>

</div>
<!-- END MAIN WRAPPER-->
@section foot{
    <script type="text/javascript">
    $("body").addClass("bg");
    function Save_Consignee(sender) {
        var shipName = $("#ShipName").val();
        if (shipName == "") {
            AlertWarning("请填写收货人");
            return;
        }
        var regionId = parseInt($("#hfSelectedNode").val());
        if (regionId == 0 || $("#hfSelectedNode").val() == "") {
            AlertWarning("请选择所在地区");
            return;
        }
        var address = $("#Address").val();
        if (address == "") {
            AlertWarning("请填写详细地址");
            return;
        }
        var celPhone = $("#CelPhone").val();
        if (celPhone == "") {
            AlertWarning("请填写手机号码");
            return;
        }
        $(sender).hide();
        $(sender).next().show();
        var form = $('#FormSubmitAddress');
        $.post(
            form.get(0).action,
            form.serialize(),
            function (data) {
                if (data == "OK") {
                    AlertSuccess("保存成功!");
                    window.location.href = $YSWL.BasePath + "UserCenter/ShippAddressList";
                } else {
                    AlertWarning("服务器繁忙，请稍候再试！");
                }
            }
        );
    }
    </script>
}


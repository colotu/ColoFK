@{
    Layout = "~/Areas/MBShop/Themes/Y1/Views/Shared/_NoFootLayout.cshtml";
}
@section head{
    <script src="/Scripts/jquery.cookie.js" type="text/javascript"></script>
}
@model YSWL.MALL.ViewModel.Shop.PayAndShip
  	<!--START HEADER-->
<header class="m_header">
    <div class="navbar-fixed-top">
        <div class="m_header_bar">
            <div class="m_icon_goback icon" onclick="history.go(-1);">
                <span></span>
            </div>
            <p class="m_header_title">设置支付及配送方式</p>
        </div>
    </div>
</header>
<div class="common_wrap mt44 mb50">
    <div class="menu_list">
        <div class="item_addr">
            <div class="menu_item pl10">
                <span>支付方式</span>
            </div>
            <div class="address_info" id="payment-ship">

                @if (Model.ListPaymentMode != null && Model.ListPaymentMode.Count > 0)
            {
                foreach (YSWL.Payment.Model.PaymentModeInfo item in Model.ListPaymentMode)
                {
                        <div class="payment-ship-lg">
                            <div class="default icon" name="payment" payname="@item.Name" id="pay-method-@item.ModeId" modeid="@item.ModeId">
                                @*default_active icon*@
                                <span></span>
                                @item.Name
                            </div>
                        </div>
                        @*<div class="input-lg">

                                    <input type="radio" name="payment" payname="@item.Name" id="pay-method-@item.ModeId" class="hookbox" value="@item.ModeId">
                                      <label for="pay-method-@item.ModeId" class="pay_ship_label">
                                          @item.Name
                                      </label>
                    </div*@
                    }
                }
            </div>
            <div class="menu_item pl10">
                <span>配送方式</span>
            </div>
            <div class="address_info"  id="shipment">
                @if (Model.ListShippingType != null && Model.ListShippingType.Count > 0)
                {
                    foreach (YSWL.MALL.Model.Shop.Shipping.ShippingType item in Model.ListShippingType)
                    {
                        <div class="payment-ship-lg">
                            <div class="default icon" name="pick"   id="shipping-type-@item.ModeId" modeid="@item.ModeId">
                                @*default_active icon*@
                                <span></span>
                                @item.Name
                            </div>

                            @*<input name="pick" id="shipping-type-@item.ModeId" class="hookbox" value="@item.ModeId" type="radio" />
                            <label for="shipping-type-@item.ModeId" class="pay_ship_label">
                                @item.Name
                            </label>*@
                        </div>
                    }
                }

            </div>
        </div>
    </div>
</div>
    <!--底部悬浮-->
    <nav class="navbar-fixed-bottom nav_bottom_focus bg_blue">
        <a href="javascript:;" onclick=" Save_PayAndShip(this) ">
            <span class="font_white">保存支付及配送方式</span>
        </a>
    </nav>


    <script type="text/javascript">
        $("body").addClass("bg");

        @if (Model.CurrentPaymentMode != null)
{
      @:  $('#payment-ship [modeid=@(Model.CurrentPaymentMode.ModeId)]').addClass('default_active').removeClass('default');
                }
        @if (Model.CurrentShippingType != null)
    {
    @:  $('#shipment [modeid=@(Model.CurrentShippingType.ModeId)]').addClass('default_active').removeClass('default');
                    }
        $(document).on("click", '#payment-ship [name="payment"]', function () {
            var payId = $(this).attr('modeid');
            $.cookie('m_so_payId', payId, { expires: 1, path: '/' }); //记录payId
            location.href = $YSWL.BasePath + 'Order/PayAndShipInfo?payId=' + payId;
        });
        $(document).on("click", '#shipment [name="pick"]', function () {
            $('#shipment [name="pick"]').addClass('default').removeClass('default_active');
            $(this).addClass('default_active').removeClass('default');
        });

        function Save_PayAndShip(sender) {
            $(sender).hide();
            $(sender).next().show();
            var payId = $('#payment-ship .default_active').attr('modeid');
            var shipId = $('#shipment .default_active').attr('modeid');
            $.cookie('m_so_payId', payId, { expires: 1, path: '/' }); //记录payId
            $.cookie('m_so_shipId', shipId, { expires: 1, path: '/' }); //记录shipId
            window.location.href = $YSWL.BasePath + "Order/SubmitOrder";
        }
    </script>

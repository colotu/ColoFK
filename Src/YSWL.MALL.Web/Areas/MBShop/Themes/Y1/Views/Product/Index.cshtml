@using Webdiyer.WebControls.Mvc
@model YSWL.MALL.ViewModel.Shop.ProductListModel
@{
    Layout = "/Areas/MBShop/Themes/Y1/Views/Shared/_BaseLayout.cshtml";
    string cid = Request.RequestContext.RouteData.Values["cid"] != null ? Request.RequestContext.RouteData.Values["cid"].ToString() : "0";
    string brandid = Request.RequestContext.RouteData.Values["brandid"] != null ? Request.RequestContext.RouteData.Values["brandid"].ToString() : "0";
    string attrvalues = Request.RequestContext.RouteData.Values["attrvalues"] != null ? Request.RequestContext.RouteData.Values["attrvalues"].ToString() : "0";
    string mod = Request.RequestContext.RouteData.Values["mod"] != null ? Request.RequestContext.RouteData.Values["mod"].ToString() : "hot";
    ViewBag.Title = "商品列表";
}
<script src="/Scripts/jquery/maticsoft.waterfall.js"></script>
<script src="/Scripts/jquery/maticsoft.img.js"></script>

<!--START MAIN-WRAPPER-->
<div class="main-wrapper">
    <!--START HEADER-->
    <header class="m_header">
        <div class="navbar-fixed-top">
            <div class="m_header_bar">
                <div class="m_icon_goback icon" onclick="javascript:history.go(-1);">
                    <span></span>
                </div>
                @if (String.IsNullOrWhiteSpace(Model.CurrentCateName))
                {
                    <p class="m_header_title">商品列表</p>
                }
                else
                {
                    <p class="m_header_title">@Model.CurrentCateName</p>
                }

                <div class="m_icon_share icon" style="display:none">
                    <span></span>
                </div>
            </div>
        </div>
    </header>
    <table width="100%" height="55" border="0" cellspacing="0" cellpadding="0" class="pro_list_sort mt44" >
        <tr>
            <td class="modList" mod="hot" style="display:none">
                <a href="javascript:;">销量</a>
            </td>
            <td class="modList" mod="price" style="display:none">
                <a href="javascript:;">价格</a>
            </td>
            <td class="modList" mod="new" style="display:none">
                <a href="javascript:;">新品</a>
            </td>

            <td class="modView" mod="hot">
                <a href="javascript:;">销量</a>
            </td>
            <td class="modView" mod="price">
                <a href="javascript:;">价格</a>
            </td>
            <td class="modView" mod="new">
                <a href="javascript:;">新品</a>
            </td>
            <td style="background: none;">

                <a href="javascript:void(0);"  id="searchlist" onclick="changeview();">
                    <img id="change_img" src="/Areas/MBShop/Themes/Y1/Content/images/pro_img.gif" />
                </a>
                <a href="javascript:void(0);" style="display:none" id="searchlist2" onclick="changelist();">
                    <img id="change_img" src="/Areas/MBShop/Themes/Y1/Content/images/pro_img_02.gif" />
                </a>
            </td>
        </tr>
    </table>
    <!-- END HEADER -->
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <input type="hidden" value="@cid" id="hidDataParam"/>
              
                <div class="list_box row" id="J_lazyload" style=" margin-bottom: 50px;">
                    @{Html.RenderPartial("_ProductList_Image", Model);}
                    <div ajaxcontent="1" class="search-cont-bar" name="__CXSS0011">
                        <div class="search-cont-in">
                            <div class="text-shadow-l">
                                <div class="text-shadow-r">
                                    <div class="text-bor-l">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @*<div class="list_box row s mb50 col-xs-12" id="J_lazyload" style="overflow: auto;">
            

            @{Html.RenderPartial("_ProductList_Image", Model);}

        </div>*@
    </div>
<!--加入购物车弹窗-->
@Html.Partial("/Areas/MBShop/Themes/Y1/Views/Partial/_AddCart.cshtml")
@section foot{
    <script src="/Scripts/jqueryui/jquery-ui-1.9.2.custom.js" type="text/javascript"></script>
    <script src="/Areas/MBShop/Themes/Y1/Content/Scripts/productdetail.js?v=1.0"></script>
<script>
    function changelist()
    {
        var mod= $(".adb").attr("mod");
        $("#J_lazyload").load("@(ViewBag.BasePath)Product/Index", { viewName: "_ProductList_Image", ajaxViewName: "_ProductList_Image", cid: @cid,brandid:@brandid, attrvalues:@attrvalues,mod:mod });
        $("#searchlist").show();
        $("#searchlist2").hide();
        $(".modList").hide();
        $(".modView").show();
        $(".modList").removeClass("adb");
        $(".modView[mod="+mod+"]").addClass("adb");
    }
    function changeview() {
        var mod= $(".adb").attr("mod");
        $("#J_lazyload").load("@(ViewBag.BasePath)Product/Index", { viewName: "_ProductList",ajaxViewName: "_ProductList", cid: @cid, brandid:@brandid, attrvalues:@attrvalues,mod:mod });
        $("#searchlist").hide();
        $("#searchlist2").show();
        $(".modList").show();
        $(".modView").hide();
        $(".modView").removeClass("adb");
        $(".modList[mod="+mod+"]").addClass("adb");
    }

    $(function () {
        $(".modView[mod='@(mod)']").addClass("adb");
        $(".modList").click(function () {
            $(".modList").removeClass("adb");
            var mod = $(this).attr("mod");
            $(".modList[mod="+mod+"]").addClass("adb");
            //location.href = $YSWL.BasePath +"p/@(cid)/@(brandid)/@(attrvalues)/" + mod;
            $("#J_lazyload").load("@(ViewBag.BasePath)Product/Index", { viewName: "_ProductList",ajaxViewName: "_ProductList", cid: @cid, brandid:@brandid, attrvalues:@attrvalues,mod:mod });
        });
        resizeImg('._ProductList', 100, 100);

        $(".modView").click(function () {
            $(".modView").removeClass("adb");
            var mods = $(this).attr("mod");
            $(".modView[mod="+mods+"]").addClass("adb");
            $("#J_lazyload").load("@(ViewBag.BasePath)Product/Index", { viewName: "_ProductList_Image",ajaxViewName: "_ProductList_Image", cid: @cid, brandid:@brandid, attrvalues:@attrvalues,mod:mods });
            //location.href = $YSWL.BasePath +"p/@(cid)/@(brandid)/@(attrvalues)/" + mods;
        });

    })
</script>
}
































































        @*@using Webdiyer.WebControls.Mvc*@
            @*@model YSWL.MALL.ViewModel.Shop.ProductListModel*@
            @*@{
                Layout = "/Areas/MBShop/Themes/Y1/Views/Shared/_BaseLayout.cshtml";
                string cid = Request.RequestContext.RouteData.Values["cid"] != null ? Request.RequestContext.RouteData.Values["cid"].ToString() : "0";
                string brandid = Request.RequestContext.RouteData.Values["brandid"] != null ? Request.RequestContext.RouteData.Values["brandid"].ToString() : "0";
                string attrvalues = Request.RequestContext.RouteData.Values["attrvalues"] != null ? Request.RequestContext.RouteData.Values["attrvalues"].ToString() : "0";
                string mod = Request.RequestContext.RouteData.Values["mod"] != null ? Request.RequestContext.RouteData.Values["mod"].ToString() : "hot";
                ViewBag.Title = "商品列表";
            }*@
            @*<script type="text/javascript" src="@Url.Content("/Scripts/jquery.unobtrusive-ajax.min.js")"></script>*@
            @*<script src="/Scripts/jquery/maticsoft.img.min.js" type="text/javascript"></script>
            <script type="text/javascript">
                $(function () {
                    $(".modList[mod='@(mod)']").addClass("a");
                    $(".modList").click(function () {
                        var mod = $(this).attr("mod");
                        location.href = $YSWL.BasePath +"p/@(cid)/@(brandid)/@(attrvalues)/" + mod;
                    });
                    resizeImg('.products_list', 100, 100);
                })
            </script>*@
            @*<div class="top">
                <span><a href="@(ViewBag.BasePath)p/c/@ViewBag.ParentId">&lt;返回</a></span>
                @Html.Partial("/Areas/MBShop/Themes/Y1/Views/Partial/_HeadRight.cshtml")
               <span style="padding-left: 32px"> @Model.CurrentCateName</span>
            </div>*@
            @*<table width="100%" height="55" border="0" cellspacing="0" cellpadding="0" class="pro_list_lm">
                <tr>
                    <td class="modList" mod="hot">
                        <a href="javascript:;">销量</a>
                    </td>
                    <td class="modList" mod="price">
                        <a href="javascript:;">价格</a>
                    </td>
                    <td class="modList" mod="new">
                        <a href="javascript:;">新品</a>
                    </td>
                    <td style="background: none;">
                        <a href="@(ViewBag.BasePath)p/@(cid)/@(brandid)/@(attrvalues)/@(mod)/0-0?viewname=Product_Image&ajaxViewName=_ProductList_Image&pageSize=10">
                            <img src="/Areas/MBShop/Themes/Y1/Content/images/pro_img.gif" /></a>
                    </td>
                </tr>
            </table>*@
            @*<div class="search">
                 @Html.Partial("/Areas/MBShop/Themes/Y1/Views/Partial/_Search.cshtml")
                <a href="@(ViewBag.BasePath)product/Filter/@(cid)" class="btn-sift2"><span>筛选</span></a>
            </div>*@
            @*@{Html.RenderPartial("_ProductList", Model);}*@

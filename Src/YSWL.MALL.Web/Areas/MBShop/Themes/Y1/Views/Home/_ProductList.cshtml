@model List<YSWL.MALL.Model.Shop.Products.ProductInfo>
@using Webdiyer.WebControls.Mvc
<script src="~/Scripts/jquery/maticsoft.waterfall.min.js"></script>
               <div id="ProductListDiv">
                   <script type="text/javascript">
                       $(function () {
                           waterFall.init({
                               //Ajax请求参数
                               AjaxOptions: {
                                   //Ajax请求参数
                                   Params:@Html.Raw(ViewBag.DataParam),
                                   //Ajax请求URL
                                   DataURL: "@(ViewBag.BasePath)Product/ListWaterfall"
                               },
                               //瀑布流起始索引记录器 - 用于累计
                               CurrentAjaxStartIndexHF: $('#hfCurrentPageAjaxStartIndex'),
                               //瀑布流起始索引
                               StartIndex:$('#hfCurrentPageAjaxStartIndex').val() ? parseInt($('#hfCurrentPageAjaxStartIndex').val()) : 0,
                               //瀑布流结束索引
                               EndIndex: $('#hfCurrentPageAjaxEndIndex').val() ? parseInt($('#hfCurrentPageAjaxEndIndex').val()) : 0,

                               //分页容器
                               PagedContainer: $('.in_pages'),
                               //列容器ID前缀
                               ColumnFirstId: "J_lazyload",
                               //列数
                               ColumnNumber: 0,RowNumber: 4
                           });
                           $.lazyFixedLoadImg('.list-n4', 175, 228);
                       });
                   </script>
                   <div class="index_title">
                       @ViewBag.CategoryName
                   </div>
                   @if (Model != null && Model.Count > 0)
                   {
                       foreach (var item in Model)
                       {
                           <div class="prod col-xs-6 col-sm-3 product">
                               <a class="prod_img" href="@(ViewBag.BasePath)p/d/@item.ProductId" target="_blank">
                                   <img src="@YSWL.MALL.Web.Components.FileHelper.GeThumbImage(item.ThumbnailUrl1, "T158X158_")" alt="">
                               </a>
                               <div class="prod_item">
                                   <span>可比克 飘香牛排味 咔趣薯条 45g</span>
                                   <span class="price_red">￥@item.LowestSalePrice.ToString("F")</span>
                               </div>
                               <div class="cart2 icon">
                                   <span></span>
                               </div>
                           </div>
                       }
                    <div>
                        @Ajax.Pager(Model.ProductPagedList, new PagerOptions
                      {
                          ShowDisabledPagerItems = false,
                          AlwaysShowFirstLastPageNumber = true,
                          PageIndexParameterName = "pageIndex",
                          NumericPagerItemCount = 10,
                          CurrentPagerItemTemplate = "<p class=\"in_s\">{0}</p>",
                          NumericPagerItemTemplate = "<p>{0}</p>",
                          NavigationPagerItemTemplate = "<p>{0}</p>",
                          CssClass = "in_pages",
                           
                      }).AjaxOptions(a => a.SetUpdateTargetId("ProductListDiv"))
                        <input type="hidden" id="hfCurrentPageAjaxStartIndex" value="@ViewBag.CurrentPageAjaxStartIndex" />
                        <input type="hidden" id="hfCurrentPageAjaxEndIndex" value="@ViewBag.CurrentPageAjaxEndIndex" />
                    </div>
                   }
               </div>


           

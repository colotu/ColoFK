@using Webdiyer.WebControls.Mvc
@{
    Layout = "/Areas/MBShop/Themes/Y1/Views/Shared/_BaseLayout.cshtml";
    ViewBag.Title = "搜索";
    ViewBag.Keywords = "搜索";
    ViewBag.Description = "搜索";
}
<script src="/Areas/MBShop/Themes/Y1/Content/Scripts/searchHistory.js"></script>
<header class="m_header">
    <div class="">
        <div class="m_header_bar">
            <div class="m_icon_goback icon" onclick="javascript:history.go(-1);">
                <span></span>
            </div>
            <p class="m_header_title">搜索</p>
        </div>
    </div>
</header>


<!--START MAIN-WRAPPER-->
<div class="main-wrapper">
    <!--START HEADER-->
    <!-- END HEADER -->
    <div class="myinfo wrap">
        <div class="search_prod">
            <form class="bs-example bs-example-form" role="form">
                <div class="container">
                    <div class="row">
                        <div class="input-group">
                            <input type="text" id="txtKeyWord" class="form-control">
                            <span class="input-group-btn">
                                <button class="btn btn-default" id="btnSearch" style="height: 34px;" type="button">
                                    搜索
                                </button>
                            </span>
                        </div><!-- /input-group -->
                    </div><!-- /.col-lg-6 -->
                </div><!-- /.row -->
            </form>

        </div>
        <div id="searchList" class="search_list wrap" style="display:">
            <div class="search_item">
                <h3>历史搜索</h3>
            </div>
            <div id="historyList">
   
            </div>
            <button type="button" class="btn btn-default btn-block search_empty_btn" onclick="clearList();">清空历史搜索</button>
        </div>

    </div>


    <!-- ################-->
    <!-- END TOP MENU -->
    <!-- ################-->
</div>
<!-- END MAIN WRAPPER-->




<script type="text/javascript"> 

    
    
    $(function () {
        var sh = new History("his");
        var list = sh.getList();
        if (list != null)
        {
            for (var i = list.length - 1; i >= 0; i--) {
                appendTo(list[i].link);
            }

        }
        
                $("#btnSearch").click(function () {
                    var keyword = $("#txtKeyWord").val();
                    if (keyword == "") {
                        AlertWarning('请输入关键字！');
                        return;
                    }
                    sh.add(keyword);
                    location.href = $YSWL.BasePath + "se/0/0/hot/0-0/" + keyword;
                });   
                
                
            })

    //添加元素
            function appendTo(text)
            {
                $("#historyList").prepend('<a href="'+$YSWL.BasePath + "se/0/0/hot/0-0/" + text+'"><div class="btn search_item"><p>' + text + '</p></div></a>')
            }
            function clearList() {
               
                delCookie("his");
                $("#historyList").empty();
            }
            
            function delCookie(name) {
                var date = new Date();
                date.setTime(date.getTime() - 10000);
                document.cookie = name + "=a; expires=" + date.toGMTString();

            }


</script>




































@********************留作搜索结果页*****************************@
@*@using Webdiyer.WebControls.Mvc
    @model YSWL.ViewModel.Shop.ProductListModel
    @{
        Layout = "/Areas/MBShop/Themes/Y1/Views/Shared/_BaseLayout.cshtml";
        string cid = Request.RequestContext.RouteData.Values["cid"] != null ? Request.RequestContext.RouteData.Values["cid"].ToString() : "0";
        string brandid = Request.RequestContext.RouteData.Values["brandid"] != null ? Request.RequestContext.RouteData.Values["brandid"].ToString() : "0";
        string keyword = Request.RequestContext.RouteData.Values["keyword"] != null ? Request.RequestContext.RouteData.Values["keyword"].ToString() : "";
        string mod = Request.RequestContext.RouteData.Values["mod"] != null ? Request.RequestContext.RouteData.Values["mod"].ToString() : "hot";
    }
    <script type="text/javascript" src="@Url.Content("/Scripts/jquery.unobtrusive-ajax.min.js")"></script>
    <script src="/Scripts/jquery/maticsoft.img.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $(".modList[mod='@(mod)']").addClass("a");
            $(".modList").click(function () {
                var mod = $(this).attr("mod");
                location.href = $YSWL.BasePath +"s/@(cid)/@(brandid)/" + mod + "/0-0/@(keyword)";
            });
        })
    </script>
    <div class="top">
        <span><a href="javascript:;" onclick="history.go(-1)">&lt;返回</a></span>
        @Html.Partial("/Areas/MBShop/Themes/Y1/Views/Partial/_HeadRight.cshtml")
    </div>

    <table width="100%" height="55" border="0" cellspacing="0" cellpadding="0" class="pro_list_lm">
        <tr>
            <td class="modList" mod="hot">
                <a href="javascript:;">销量</a>
            </td>
            <td class="modList" mod="price">
                <a href="javascript:;">价格</a>
            </td>
            <td class="modList" mod="new">
                <a href="javascript:;">新品</a>
            </td>
            <td style="background: none;">
                <a href="@(ViewBag.BasePath)s/@(cid)/@(brandid)/@(mod)/0-0/@(keyword)?viewname=Product_Image&ajaxViewName=_ProductList_Image">
                    <img src="/Areas/MBShop/Themes/Y1/Content/images/pro_img.gif" /></a>
            </td>
        </tr>
    </table>
    <div class="search">
        @Html.Partial("/Areas/MBShop/Themes/Y1/Views/Partial/_Search.cshtml")
        <a href="@(ViewBag.BasePath)s/f/@(cid)/@(keyword)" class="btn-sift2"><span>筛选</span></a>
    </div>

    <!--搜索店铺-->
    @Html.Action("Store", "Search", new { keyword = keyword, viewName = "_Store" })

    <span style="padding-left: 8px">搜索“@YSWL.Common.StringPlus.SubString(keyword,20,"...")”，找到约@(ViewBag.TotalCount)条相关结果：</span>

    @{Html.RenderPartial("_ProductList", Model);}*@

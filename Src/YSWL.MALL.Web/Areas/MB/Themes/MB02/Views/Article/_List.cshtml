@using Webdiyer.WebControls.Mvc
@model  PagedList<YSWL.MALL.Model.CMS.Content>          
<!-- start tab切换主体 -->
<ul class="tab-content">
    <li class="tab-box">
        <div class="news_list" id="list">
            @if (Model != null && Model.Count > 0)
            {
                foreach (var item in Model)
                {
                    <div class="news_item">
                        @if (!String.IsNullOrWhiteSpace(item.ImageUrl))
                    {
                            <span class="news_img">
                                <img src="@item.ImageUrl" />
                            </span>
                        }
                        <a href="@(ViewBag.BasePath)Article/Details/@item.ContentID">
                            <h3 class="news_title">@item.Title</h3>
                        </a>
                        <p class="news_text">@Html.Raw(YSWL.Common.Globals.HtmlDecode(YSWL.MALL.BLL.Settings.SEORelationManage.FilterStr(item.Summary, true, true, false, false, false, item.ContentID, "CMSSummary")))</p>
                        <div class="news_info">
                            <div class="news_writer">@item.BeFrom</div>
                            <div class="news_date">@item.CreatedDate.ToString("yyyy-MM-dd HH:mm")</div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="news-list_empty ">
                    <div class="empty">
                        <div class="img_wrap">
                            <img src="/Areas/MB/Themes/MB02/Content/images/nopro.png" alt="">
                        </div>
                        <div class="txt">
                            <p>没有找到相关数据</p>
                        </div>
                    </div>

                </div>
                  
            }
        </div>
    </li>
</ul>
@if (Model != null)
{
    <script type="text/javascript">
    $(function () {
        pullUp.init({
            //Ajax请求参数
            AjaxOptions: {
                //Ajax请求参数
                Params: $.extend(@Html.Raw(ViewBag.DataParam), { ajaxVName:"_ListMore"}),
                //Params:@Html.Raw(ViewBag.DataParam),
                //Ajax请求URL
                DataURL: "@(ViewBag.BasePath)Article/List"
            },

            //当前页码
            CurrentPage: 2,
            //页码参数名称
            PageParamsName: "pageIndex",
            //每页数量
            PageSize: @(ViewBag.PageSize),
            //每页数量参数名称
            PageSizeParamsName: "pageSize",
            //内容容器
            ContentContainer: $("#list"),
            //正在加载提示框
            LoadingTipBox: $("#loadingMore"),
            //无更多数据提示框
            NoMoreTipBox: $("#noMoreProduct"),
            LoadFinish:false
        });

        pullUp.NoMoreTipBox.hide();
        if(@(Model.Count)<@(ViewBag.PageSize)){
             pullUp.NoMoreTipBox.show();
        } 
    });
    </script>
}

<!-- end tab切换主体 -->
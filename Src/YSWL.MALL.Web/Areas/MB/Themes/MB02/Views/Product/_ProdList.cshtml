@using Webdiyer.WebControls.Mvc
@model YSWL.MALL.ViewModel.Shop.ProductListModel

@if (Model.ProductPagedList != null)
{     
 <ul id="pro_list">
        @foreach (var item in Model.ProductPagedList)
                {
            <li>
                <a href="@(ViewBag.BasePath)p/d/@item.ProductId">
                    <div class="list_item">
                        <div class="pro_img">
                            <img src="@YSWL.MALL.Web.Components.FileHelper.GeThumbImage(item.ThumbnailUrl1, "T420X420_")" alt="@item.ProductName" onerror="this.onerror = ''; this.src = '/Content/themes/base/images/404/404_1.png'">
                        </div>
                        <div class="info_wrap pro_info">
                            <p class="name">@item.ProductName</p>
                            @if (item.SupplierId > 0)
                            {
                                <div class="shop_name">
                                    <span class="word_shop">铺</span>
                                    @YSWL.MALL.Web.Areas.MB.Controllers.PartialController.GetSupplierShopName(item.SupplierId)
                                </div>
                            }
                            <div class="trading_volume">已售<span class="quantity-num">@(item.SaleCounts)</span>@item.Unit</div>
                            <p class="price"><span class="symbol">￥</span>@item.LowestSalePrice.ToString("F")</p>
                        </div>
                    </div>
                </a>
            </li>
        }
    </ul>
    <script type="text/javascript">
    $(function () {
        pullUp.init({
            //Ajax请求参数
            AjaxOptions: {
                //Ajax请求参数
                Params: $.extend(@Html.Raw(ViewBag.DataParam), { ajaxViewName:"_ProdListMore"}),
                //Params:@Html.Raw(ViewBag.DataParam),
                //Ajax请求URL
                DataURL: "@(ViewBag.BasePath)p"
            },

            //当前页码
            CurrentPage: 2,
            //页码参数名称
            PageParamsName: "pageIndex",
            //每页数量
            PageSize: @(ViewBag.PageSize),
            //每页数量参数名称
            PageSizeParamsName: "pageSize",
            //内容容器
            ContentContainer: $("#pro_list"),
            //正在加载提示框
            LoadingTipBox: $("#loadingMore"),
            //无更多数据提示框
            NoMoreTipBox: $("#noMoreProduct"),
            LoadFinish:false
        });
        pullUp.NoMoreTipBox.hide();
        if(@(Model.ProductPagedList.Count)<@(ViewBag.PageSize)){
            pullUp.NoMoreTipBox.show();
        }
    });
    </script>
}
else
{
        <div class="empty pro_list_empty">
            <div class="img_wrap">
                <img src="/Areas/MB/Themes/MB02/Content/images/nopro.png" alt="">
            </div>
            <div class="txt">
                <p>没找到相关商品</p>
            </div>
        </div>
}

@{
    Layout = "~/Areas/MShop/Themes/YX/Views/Shared/_BaseLayout.cshtml";
}
@model YSWL.MALL.Model.Shop.Order.OrderInfo
  
<link href="/Areas/MShop/Themes/YX/Content/css/myorderdetail.css" rel="stylesheet"
    type="text/css" />
<div id="order_detail">
     <div class="top"> <span><a href="@(ViewBag.BasePath)u">&lt;返回</a></span>
        @Html.Partial("/Areas/MShop/Themes/YX/Views/Partial/_HeadRight.cshtml")  
    </div>
    <section class="section_1">
        <p>
            订单号<span>@Model.OrderCode</span> <span class="status">@YSWL.MALL.Web.Areas.MShop.Controllers.UserCenterController.GetOrderType(Model.PaymentGateway, Model.OrderStatus, Model.PaymentStatus, Model.ShippingStatus)</span></p>
    </section>
    <section>
        <div class="gList">
            <div class="J_product_list">
                @if (Model != null && Model.OrderItems.Count > 0)
                {
                    foreach (var item in Model.OrderItems)
                    {
                        <div class="item">
                            <p class="img_wrap">
                                <a href="@(ViewBag.BasePath)p/d/@item.ProductId" class="J_ytag">
                                    <img src="@YSWL.MALL.Web.Components.FileHelper.GeThumbImage(item.ThumbnailsUrl, "T115X115_")"  width="70" height="70">
                                </a>
                            </p>
                            <p class="tt">
                                <a href="@(ViewBag.BasePath)p/d/@item.ProductId" class="J_ytag" >
                                    @item.Name
                                </a><a></a>
                            </p>
                            <p class="num">
                                x<span>@item.Quantity</span></p>
                            <p class="price">
                                ¥@((item.SellPrice * item.Quantity).ToString("F"))</p>
                        </div>
                    }
                }
            </div>
        </div>
    </section>
    <section>
        <article>
            <div class="orderInfo">
                <p>
                    商品金额：<span class="totalprice">¥@Model.ProductTotal.ToString("F")</span>
                </p>
                <p>
                   运费：<span class="totalprice">¥@(Model.Freight.HasValue ? Model.Freight.Value.ToString("F") : "0.00")</span>
                </p>
                <p>
                  优惠：<span class="totalprice">¥@((Model.OrderTotal - Model.Amount).ToString("F"))</span>
                </p>
                <p>
                    应付总额：<span class="totalprice">¥@Model.Amount.ToString("F")</span>
                </p>
                <p>收货地址:<span>
                            @Model.ShipAddress 
                        </span></p>
                <p>收货人:<span>@Model.ShipName</span></p>
                <p>收货电话:<span>@Model.ShipCellPhone</span></p>
            </div>
            
               @if (!String.IsNullOrWhiteSpace(Model.ShipOrderNumber))
               {
                   <div class="orderInfo">
                       <div>物流跟踪</div>
                       @Html.Action("ExpressList", "Order", new {OrderId = Model.OrderId})
                   </div>
               }

            <div class="orderInfo J_orderInfo" style="display: none;">
                <p>
                    成交时间:<span>@Model.CreatedDate.ToString("yyyy-MM-dd HH:mm:ss")</span></p>
                <p>
                    配送方式:<span>@Model.RealShippingModeName</span></p>
                <p>物流单号:<span>@(string.IsNullOrWhiteSpace(Model.ShipOrderNumber) ? "无" : Model.ShipOrderNumber)</span></p>
            </div>
            <!--<p class="more">更多交易明细</p>-->
            <p class="more J_ytag" id="J_more_info" data-type="2" ytag="21001" style="cursor: pointer;">
                显示交易明细</p>
        </article>
    </section>
</div>
<script type="text/javascript">
    $(function () {
        $("#J_more_info").die("click").live("click", function () {
            $(".J_orderInfo").toggle();
        });
    });
</script>

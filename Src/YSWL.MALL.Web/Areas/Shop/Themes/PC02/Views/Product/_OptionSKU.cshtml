@model YSWL.MALL.ViewModel.Shop.ProductSKUModel
@if (Model == null) { return; }
@if (!ViewBag.HasStock && !ViewBag.HasSKU && Model.ListSKUInfos != null && Model.ListSKUInfos.Count == 1)
{
    <script type="text/javascript">
        $(function () {
            $("#disableBuy").attr('disable', 'true');
            $('#btnAddToCart').removeClass('addCart').addClass('addCart-gray');
            $('#iteminfo #divBuyInfo').hide();
            $('#iteminfo #closeArrivingNotifyMess').text("非常抱歉, 此商品已售罄!");
            $('#iteminfo #closeArrivingNotifyMess').show();
        });
    </script>
}
<input type="hidden"  value="@ViewBag.HasSKU" id="hdHasSKU" />
@if (!ViewBag.HasSKU && Model.ListSKUInfos != null && Model.ListSKUInfos.Count == 1)
{
   <input type="hidden"  value="@Model.ListSKUInfos[0].SKU"   stock="@Model.ListSKUInfos[0].Stock"   id="hdprodSku" />
    <script type="text/javascript">
        $(function () {
            $('#btnAddToCart').attr('itemid', '@Model.ListSKUInfos[0].SKU');
            $('#div_stock').show().find('#stock_num').text(@Model.ListSKUInfos[0].Stock);
        });
    </script>
}
@if (Model.ListAttrSKUItems == null || Model.ListAttrSKUItems.Count < 1)
{
    return;
}
<div id="SKUOptions" style="overflow: hidden;">
<input type="hidden" id="SKUDATA" value="@ViewBag.SKUJson"/>
  
    @foreach (KeyValuePair<YSWL.MALL.Model.Shop.Products.AttributeInfo, SortedSet<YSWL.MALL.Model.Shop.Products.SKUItem>>
        attrSKUItem in Model.ListAttrSKUItems)
    {

        if (!string.IsNullOrWhiteSpace(attrSKUItem.Value.Min.ImageUrl))
        {
        
            <div class="prdSizeWrap">
                <div class="prdSizeTitle">@(attrSKUItem.Key.AttributeName + "：")</div>
                <ul class="prdSize AttrItems">
                    @foreach (YSWL.MALL.Model.Shop.Products.SKUItem skuItem in attrSKUItem.Value)
                    {
                        <li AttrId="@skuItem.ValueId" class="SkuItems" style="position: relative;padding: 2px;"><a  href="javascript:;" title="@skuItem.ValueStr" alt="@skuItem.ValueStr">
                                                                            @if (!string.IsNullOrWhiteSpace(skuItem.ImageUrl))
                                                                            {
                                                                                <img width="25" height="25" class="vm" src="@YSWL.MALL.Web.Components.FileHelper.GeThumbImage(skuItem.ImageUrl, "T32x32_")" largeurl="@YSWL.MALL.Web.Components.FileHelper.GeThumbImage(skuItem.ImageUrl, "T300X390_")" alt="@skuItem.ValueStr" title="@skuItem.ValueStr" />
                                                                            }
                                                                        </a><span class="selected"></span> </li>
                    }
                </ul>
            </div>
    
        }
        else
        {
            <div class="prdSizeWrap">
                <div class="prdSizeTitle">@(attrSKUItem.Key.AttributeName + "：")</div>
                <ul class="prdSize AttrItems">
                    @foreach (YSWL.MALL.Model.Shop.Products.SKUItem skuItem in attrSKUItem.Value)
                    {
                        <li attrId="@skuItem.ValueId" style="position: relative;" class="SkuItems"><a href="javascript:;" title="@skuItem.ValueStr" alt="@skuItem.ValueStr">@skuItem.ValueStr</a>
                            <span class="selected"></span> </li>
                    }
                </ul>
            </div>
        
    
        }
    }
</div>
@model YSWL.MALL.ViewModel.Shop.ProductListModel 
@{
    Layout = "/Areas/Shop/Themes/PC05/Views/Shared/_BaseLayout.cshtml";
    string cid = Request.RequestContext.RouteData.Values["cid"] != null ? Request.RequestContext.RouteData.Values["cid"].ToString() : "0";
    string brandid = Request.RequestContext.RouteData.Values["brandid"] != null ? Request.RequestContext.RouteData.Values["brandid"].ToString() : "0";
    string attrvalues = Request.RequestContext.RouteData.Values["attrvalues"] != null ? Request.RequestContext.RouteData.Values["attrvalues"].ToString() : "0";
    string mod = Request.RequestContext.RouteData.Values["mod"] != null ? Request.RequestContext.RouteData.Values["mod"].ToString() : "default";
    string price = Request.RequestContext.RouteData.Values["price"] != null ? Request.RequestContext.RouteData.Values["price"].ToString() : "";
}
@section head{
	<link href="/Areas/Shop/Themes/PC05/Content/Css/goods.css" rel="stylesheet"/>
} 
<script type="text/javascript">
    $(function () {
        //保存显示价格
        var priceStr = '@price';
        var price1 = priceStr.split("-")[0];
        var price2 = priceStr.split("-")[1];
        if (!isNaN(price1) && parseInt(price1) > 0) {
            $("#minPrice").val(price1);
        }
        if (!isNaN(price2) && parseInt(price2) > 0) {
            $("#maxPrice").val(price2);
        }
        //未设置价格范围
        if ((isNaN(parseInt(price1)) || parseInt(price1) <= 0) && (isNaN(parseInt(price2)) || parseInt(price2) <= 0)) {
            $('#price_fanwei').addClass('ibg').addClass('hover');
        }
        $("#SubPrice").click(function () {
            price1 = parseInt($("#minPrice").val());
            price2 = parseInt($("#maxPrice").val());
            if (isNaN(price1)) {
                price1 = 0;
            }
            if (isNaN(price2)) {
                price2 = 0;
            }
            if (price1 > price2 && price1 > 0 && price2 > 0) {
                var sw = price1;
                price1 = price2;
                price2 = sw;
                $("#minPrice").val(price1);
                $("#maxPrice").val(price2);
            }
            location.href = $YSWL.BasePath + "product/@cid/@brandid/@attrvalues/@mod/" + price1 + "-" + price2;
        });

    });
    </script>
<div class="sub-goodsbody clearfix">	
    
            <h1 class="sub-h1nav"> 
            @if (Model.CategoryPathList != null && Model.CategoryPathList.Count > 0)
    {
        for(int i=0;i<Model.CategoryPathList.Count;i++)
        {
            if (i== 0)
            { 
                    <a class="fs18" href="@(ViewBag.BasePath)product/@Model.CategoryPathList[i].CategoryId/@brandid/@attrvalues/@mod/@price">
        		 	@Model.CategoryPathList[i].Name</a>
            }
            else {
                @:&gt;
                <a href="@(ViewBag.BasePath)product/@Model.CategoryPathList[i].CategoryId/@brandid/@attrvalues/@mod/@price">
        		 	<span> @Model.CategoryPathList[i].Name</span>
        		 	</a>  
            }
        }
    }
			</h1>
 
		<div class="sub-goodsleft"> 
         <!--分类筛选-->
        @Html.Action("ProductCategory", new { Cid = Model.CurrentCid, ViewName = "_ProductCategory" })
        <!--分类筛选-->

        <div class="yizhou">
      
     	<h3 style="width: 177px;">热销新品</h3>
         @Html.Action("ProductRec", "Partial", new { Type = YSWL.MALL.Model.Shop.Products.ProductRecType.Latest, Top = 8, Cid = Model.CurrentCid, ViewName = "_ProductRec" })
		    </div> 
    </div>

  <div class="sub-goodsright">
  <div class="sub-s">
        	<p><a class="sub-s-reslt" href="@(ViewBag.BasePath)product/@cid/0/0/@mod" >重置筛选条件</a>
                   商品筛选</p>
        	
               <!--品牌-->
                @Html.Action("BrandList", new { cid = Model.CurrentCid, ViewName = "_Brands", top = -1 })
                  <!--属性列表-->
                @Html.Action("AttrList", new { cid = Model.CurrentCid, ViewName = "_AttrList", top = -1 })
                <ul class="sub-sul clearfix" >
				     <li class="clearfix"><span class="slil">价格段：</span>
				                	<span class="slir mtie7">
				                		<span class="dsib1">
				                			<a class="item" id="price_fanwei" href="@(ViewBag.BasePath)product/@cid/@brandid/@attrvalues/@mod"  >不限</a>	
				                		</span>                
				                 			<input type="text" id="minPrice" class="prce"  />--<input id="maxPrice" type="text" class="prce"  /> 
				                 		 <div class="ensure-y"   style="cursor:pointer"  id="SubPrice">确定</div>
				                    </span>
				                    <div class="clear"></div>
				     </li>     
               </ul>    
        </div>
	    <div id="ProductListDiv">
        @{Html.RenderPartial("_ProductList", Model);}
        </div>

        <div class="hot_goods">
        	<h1>热卖商品</h1>
             @Html.Action("ProductRec", "Partial", new { Type = YSWL.MALL.Model.Shop.Products.ProductRecType.Hot, Top = 12, Cid = Model.CurrentCid, ViewName = "_ProductRecHot" })
        </div>
     
    </div>
</div>
 @section foot{
    <script src="/scripts/MvcPager-1.8.js" type="text/javascript"></script>
}

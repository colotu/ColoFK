@using Webdiyer.WebControls.Mvc
@model  PagedList<YSWL.MALL.Model.Shop.Products.ProductReviews>
    <ul class="goodus1 goodusxq">
            	<li class="hover"  >顾客评论（@ViewBag.TotalCount）<input type="hidden"  id="hidTotalCount" value="@ViewBag.TotalCount"/></li>
            </ul>
            <div class="gd-tab" style="display: block;">
	          
               @if (Model != null && Model.Count > 0)
               {
            <div class="load-item">
 
                <ul class="discusslist c6">
                    @foreach (var item in Model)
                    {
                        <li class="discusslist-item cf" style="min-height: 56px;">
                            <div class="cf" id="comment-main-0">
                                <a class="fl discusslist-Item-avatar" target="_blank" href="/SNS/User/Posts/@item.UserId">
                                    <img src="/@(YSWL.Components.MvcApplication.UploadFolder)/User/Gravatar/@(item.UserId).jpg" ></a>
                                <div class="discusslist-item-con">
                                    <div class="tr c9">
                                        <span class="fl"><a href="/SNS/User/Posts/@item.UserId"
                                                            target="_blank"  class="td_buyname" style="display:none;">@item.UserName</a></span>@item.CreatedDate</div>
                                    <p class="mt5">
                                        @item.ReviewText</p>
                                </div>
                            </div>
                       
                            @if (!String.IsNullOrWhiteSpace(item.ImagesPath) && !String.IsNullOrWhiteSpace(item.ImagesNames))
                            {
                                string[] arr = item.ImagesNames.Split(new Char[] { '|' }, StringSplitOptions.RemoveEmptyEntries);
                                <div class="discusslist-correlate" style="margin-left: 100px;" >
                                    <!--图片-->
                                    @for (int k = 0; k < arr.Length; k++)
                                    {
                                        <span class="detail_proimage"><img width="100px" src="@string.Format(item.ImagesPath, arr[k])" height="100px"  /></span>
                                    }                                                                      
                                </div>
                            }
                 
                        </li>
                    }
                </ul>
            </div>
                   
                   
              <div class="page mtp12">
               @Ajax.Pager(Model, new PagerOptions
          {
              ShowDisabledPagerItems = false,
              AlwaysShowFirstLastPageNumber = true,
              PageIndexParameterName = "pageIndex",
              NumericPagerItemCount = 10,
              CurrentPagerItemTemplate = "<a class=\"shoye\">{0}</a>",
              CssClass = "page",
              FirstPageText = "首页",
              PrevPageText = "上一页",
              NextPageText = "下一页",
              LastPageText = "尾页"
          }).AjaxOptions(a => a.SetUpdateTargetId("commentList"))
			  </div>
     
                   
               }
               else
               { 
                <div class="pijia" id="pageComentdl"> 
			    <div style="text-align:center"><i class="no_propt">暂无商品评价!</i></div>
                </div>       
               }


			   </div>
 
<script type="text/javascript">
    $(function () {
        $('#comment_count').text($('#hidTotalCount').val());
        encryption($('.td_buyname')); 
    });
</script>
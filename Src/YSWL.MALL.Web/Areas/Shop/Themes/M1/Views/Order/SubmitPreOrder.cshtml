@{
    Layout = "~/Areas/Shop/Themes/M1/Views/Shared/_ShoppingLayout.cshtml";
    List<YSWL.Payment.Model.PaymentModeInfo> paymentList = (List<YSWL.Payment.Model.PaymentModeInfo>)ViewBag.PaymentList;// as List<YSWL.Payment.Model.PaymentModeInfo>;
}
@section head{
    @*<link href="/Scripts/jqueryui/base/jquery-ui-1.9.2.min.css" rel="stylesheet" type="text/css" />*@
    <link href="/Scripts/jqueryui/red/jquery-ui-1.9.2.min.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery/jquery.guid.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.cookie.js" type="text/javascript"></script>
    <style type="text/css">
        .progress
        {
            display: none; 
            float: left;
            width: 1px;
            height: 14px;
            color: white;
            font-size: 12px;
            overflow: hidden;
            background-color: navy;
            padding-left: 5px;
        }
    </style>
}
@section foot{
    <script src="/Scripts/jqueryui/jquery-ui-1.9.2.min.js" type="text/javascript"></script>
    <script src="/Scripts/jqueryui/maticsoft.jqueryui.dialog.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery/maticsoft.jquery.dynatextarea.js" type="text/javascript"></script>
    <script src="/Areas/Shop/Themes/M1/Content/Scripts/ajaxLogin.js" type="text/javascript"></script>
    <script src="/Areas/Shop/Themes/M1/Content/Scripts/Pay/SubmitPreOrder.js" type="text/javascript"></script>
    <script src="/Scripts/json2.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {

            $.dynatextarea($('#txtRemark'), 200, $('#progressbar1'));
            $('#order-submit').live('click', function () {

                SubmitOrder(this);
            });

        });

        function query_remark() {
            $("#orderRemarkId").toggle();
        }

    
    </script>
    <style type="text/css">
        #step-1 div
        {
            padding: 0;
        }
    </style>
}
@model YSWL.MALL.Model.Shop.Products.ShoppingCartInfo
<input  type="hidden" id="hidUseCoupon" value="@ViewBag.PromotionsIsUseCoupon"/>
<input  type="hidden" id="hdIsMultiDepot" value="@ViewBag.IsMultiDepot"/>
<div class="wrap m2">
    <a name="consigneeFocus"></a>
    <div id="checkout">
        <div class="mt">
        </div>
        <div id="wizard" class="checkout-steps">
            <div id="step-1" class="step step-complete">
                <input id="txtAddressCount" type="hidden" value="1"/>
                <div class="step-title" style="padding: 0 45px;">
                    <strong>手机号码：</strong><span class="step-action" id="consignee_edit_action"><input
                        id="txtPhone" type="text" style="line-height: 24px" />
                    </span>
                </div>
            </div>
        @if (ViewBag.TotalPrice > 0)
        {
           <div id="step-2" class="step step-complete">
               <div class="payment">
            <h3>
                支付方式</h3>
            <div style="padding-bottom: 10px">
            </div>
            <div class="mc form">
                @if (paymentList != null && paymentList.Count > 0)
                {
                    foreach (YSWL.Payment.Model.PaymentModeInfo item in paymentList)
                    {
                    <div class="item">
                        <div class="label">
                            <input type="radio" name="payment" payname="@item.Name" id="pay-method-@item.ModeId" class="hookbox" value="@item.ModeId">
                            <label for="pay-method-@item.ModeId">
                                @item.Name
                            </label>
                        </div>
                        <div class="field">
                            <span class="tip">@Html.Raw(item.Description)</span>
                        </div>
                        <span class="clr"></span>
                    </div>
                    }
                }
            </div>
        </div>
            </div>
        }
     
            <div id="step-4" class="step step-complete">
                <div id="div_showprod">
                    <div class="step-content">
                        <div id="part-order" class="sbox-wrap">
                            <div class="sbox">
                                <div id="order-cart">
                                    <div class="order-review">
                                        <!--商品清单展示-->
                                        <span id="span-skulist">
                                            <table class="review-thead">
                                                <tbody>
                                                    <tr>
                                                        <td class="fore1">
                                                            商品
                                                        </td>
                                                        <td class="fore2">
                                                            订金
                                                        </td>
                                                        <td class="fore4">
                                                            数量
                                                        </td>
                                                        <td class="fore4">
                                                            小计
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <!--**********商品清单内容列表开始************-->
                                            <div class="review-body">
                                                <!---单品开始--->
                                             
                                                @foreach (var item in Model.Items)
                                                {
                                                    <div class="review-tbody"  id="items_@(item.SKU)">
                                                        <table class="order-table">
                                                            <tbody>
                                                                <tr>
                                                                    <td class="fore1">
                                                                        <div class="p-goods">
                                                                            <div class="p-img">
                                                                                <a href="@(ViewBag.BasePath)PrePro/Detail/@item.ProductId" target="_blank">
                                                                                    <img alt="" width="50" height="50" src="@YSWL.MALL.Web.Components.FileHelper.GeThumbImage(item.ThumbnailsUrl, "T128X130_")"></a></div>
                                                                            <div class="p-detail">
                                                                                <div class="p-name">
                                                                                    <a href="@(ViewBag.BasePath)PrePro/Detail/@item.ProductId" target="_blank">@item.Name</a>
                                                                                </div>
                                                                                @if (item.SkuValues != null && item.SkuValues.Length > 0)
                                                                                {
                                                                                    <div>
                                                                                        <div class="sizeOptions cf sku-size-div">
                                                                                            <ul class="sku-size-select AttrItems">
                                                                                                @foreach (string val in item.SkuValues)
                                                                                                {
                                                                                                    <li class="SkuItems"><a href="javascript:;">@val</a> </li>
                                                                                                }
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                }
                                                                                <div class="p-more">
                                                                                    商品编号：@item.SKU</div>
                                                                            </div>
                                                                        </div>
                                                                        <!--- 赠品和附件显示 --->
                                                                        <!--- 优惠卷显示 --->
                                                                    </td>
                                                                    <td class="p-price">
                                                                        <strong>￥@item.SellPrice.ToString("F")</strong>
                                                                    </td>
                                                                    <td class="p-promotion" style="display: none;">
                                                                    </td>
                                                                    <td class="fore2">
                                                                        <span>x @item.Quantity </span>
                                                                    </td>
                                                                    <td class="fore2 p-inventory" style="text-align: right">
                                                                        <strong style="margin-right: 5px">￥@((item.SellPrice * item.Quantity).ToString("F"))</strong>
                                                                    </td>
                                                                </tr>
                                                                <!--- 延保显示 --->
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                }
                                                <!---单品结束--->
                                            </div>
                                            <!--**********商品清单内容列表结束************-->
                                        </span>
                                    </div>
                                    <div class="order-summary">
                                        <div class="statistic fr">
                                            <div class="list">
                                                <span><em>@ViewBag.TotalQuantity</em> 件商品，总订金金额：</span><em class="price" id="warePriceId">￥@ViewBag.ProductTotal.ToString("F")</em></div>
                                        </div>
                                        <div class="span clr">
                                        </div>
                                        <div class="order-coupon" data-bind="coupon">
                                            <!-- 优惠券开始 -->
                                            <!-- 优惠券结束 -->
                                            <!-- 订单备注  -->
                                            <div class="item" id="orderRemarkItem">
                                                <div class="toggle-title">
                                                    <a class="toggler" href="javascript:void(0)" onclick="query_remark()"><b></b>添加备注信息</a></div>
                                                <div class="toggle-wrap" style="display: none" id="orderRemarkId">
                                                    <div class="cbox" data-widget="tabs" id="Remarks">
                                                        <div class="mt" style="height: auto;">
                                                            <textarea id="txtRemark" style="font-size: 14px; padding: 5px;" placeholder="您可以在此添加预订商品备注信息"
                                                                rows="3" cols="75"></textarea>
                                                            <div id="progressbar1" class="progress">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--end div.order-coupon-->
                                    </div>
                                </div>
                                <!--end div#order-cart-->
                            </div>
                            <span class="clr"></span>
                        </div>
                        <span class="clr"></span>
                        <div id="checkout-floatbar" class="checkout-buttons group">
                            <div class="sticky-wrap">
                                <div class="inner">
                                    <input type="submit" class="checkout-submit" value="" id="order-submit" productid="@Model.Items[0].ProductId" name="@Model.Items[0].Name">
                                    <span class="total">应付总额： <strong id="payPriceId" BasePrice="@ViewBag.TotalPrice.ToString("F")" >
                                        ￥@ViewBag.TotalPrice.ToString("F")
                                    </strong>元</span>
                                </div>
                                <span id="submit_message" style="display: none" class="submit-error"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
